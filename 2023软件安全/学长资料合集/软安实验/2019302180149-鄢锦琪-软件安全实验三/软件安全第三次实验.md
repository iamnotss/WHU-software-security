## 软件安全第三次实验

1. 样本行为的初步观察

**（提示：选择一个免费的恶意代码线上分析沙箱，在其中观察样本行为。）**

2. 样本行为的详细分析

**（要求：在自己构建的恶意代码分析环境中开展分析。）**

1)  行为1：XXX

**（提示：描述样本观察过程，所得到的观察结论，通过静态分析和动态分析，解释所观察到的样本行为。必须提供关键截图。）**

2)  行为2：XXX

**（提示：同上。）**

**n）……**

3. 样本危害性

**（提示：基于以上分析，分条描述该样本可能给用户计算机系统带来的危害）**

4. 防护建议

**（提示：针对普通计算机用户，提出具有可操作性的防护建议。）**





在虚拟机中运行该病毒程序, 该病毒程序会将所有文件加密![image-20211107111800811](软件安全第三次实验/image-20211107111800811.png)所有重要文件的后缀名被修改为.xxx 

桌面上新增一个html文件名为how_to_back_files.html

点开后有personal ID,有解密的途径, 包括联系邮箱和一些警告信息

![image-20211107112204771](软件安全第三次实验/image-20211107112204771.png)



 GetModuleFileNameW

GetModuleFileNameW(
HMODULE hModule, //模块句柄 或应用程序的实例句柄 若参数为NULL，则返回该应用程序全路径
__out_ecount(nSize) LPWSTR lpFilename, //字符串缓冲区，容纳文件的用null字符中止的路径
DWORD nSize //装载到缓冲区的最大字符数量
);



使用 GetEnvironmentVariable 来获取环境变量：



![image-20211109145005740](软件安全第三次实验/image-20211109145005740.png)



飞快关掉

![image-20211109154922354](软件安全第三次实验/image-20211109154922354.png)